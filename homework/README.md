# ДЗ: ITSM / Customer Support Ticket Routing (Multi-task NLP)

## 1) Цель
Построить модель, которая по тексту тикета предсказывает:
- **queue** (основная задача, 52 класса) — куда маршрутизировать тикет
- **priority** (5 классов)
- **type** (4 класса)

## 2) Данные
Источник: Hugging Face датасет **`Tobi-Bueck/customer-support-tickets`** (61 765 строк, EN/DE). (см. карточку датасета на Hugging Face)  
Поля (минимум, которые вам нужны):
- `subject` (тема), `body` (текст тикета)
- `queue`, `priority`, `type` (лейблы)

Датасет **не кладём в репозиторий** (объёмный), но **split фиксируем** индексами (см. `data/*.txt`).

## 3) Фиксированный split (обязателен)
Мы используем **случайное разбиение по индексам** с seed=42:
- train: **49412**
- val: **6176**
- test: **6177**

Файлы:
- `data/train_idx.txt`
- `data/val_idx.txt`
- `data/test_idx.txt`

Правило: после загрузки датасета берёте строки по `row_idx` из этих файлов.

## 4) Что сделать (минимум)
1) EDA: распределение классов `queue` (топ/хвост), длины текстов.
2) **Baseline**: TF‑IDF + линейная модель (для `queue`) — macro‑F1 и accuracy.
3) **Transformer** fine-tuning (любой BERT-like) на multitask:
   - либо общая голова на каждый лейбл (3 головы)
   - либо 3 отдельных модели (хуже по инженерии, но допустимо)
4) Error analysis: 20 примеров ошибок по `queue` + ваши выводы.

## 5) Метрики и скоринг
Считаем метрики **на test**:

### Основная метрика (главная)
- **Macro‑F1 по `queue`**  
  Macro‑F1 = среднее F1 по всем классам `queue`.

### Дополнительные метрики
- **Accuracy по `queue`**
- **Accuracy по `priority`**
- **Accuracy по `type`**

### Итоговый score для рейтинга
Чтобы сравнивать команды одной цифрой:
```
Score = 0.70 * MacroF1(queue) + 0.15 * Acc(priority) + 0.15 * Acc(type)
```
Если у двух работ одинаковый Score (до 0.001), тай-брейкеры:
1) MacroF1(queue)  
2) Acc(queue)

## 6) Что сдавать
- Короткий отчёт (1–2 страницы): что пробовали, таблица метрик (val/test), выводы.
- Ссылка на репозиторий с кодом/экспериментами (уже ваш, не этот).

## 7) Лицензия
Лицензия датасета: **CC BY‑NC 4.0** (некоммерческое использование, нужна атрибуция). (см. карточку датасета на Hugging Face)
